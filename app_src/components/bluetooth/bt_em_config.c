/*
 * bluetooth_em_config.c
 *
 *  Created on: Jun 9, 2021
 *      Author: zhaoshengqi
 */
#include <stdint.h>
#include "bt_em_config.h"

#define CALC_HEAP_LEN(len)      ((((len) + (sizeof(uint32_t) - 1)) / sizeof(uint32_t)) + (12 / sizeof(uint32_t)))

#if ((BLE_SUPPORT == ENABLE)&&(BT_SUPPORT == ENABLE))
#if 1
/*
const uint16_t App_Em_Common_Config[] = {
		0x0, 0x40, 0x90, 0x96, 0x96, 0x69d2//0x1dde
};

const uint16_t APP_Em_Bt_config[] = {
		0x1dde, 0x1dde, 0x1dee, 0x211e, 0x3, 0x211e, 0x6, 0x2172, 0x21d6, 0x14,
		0x224e, 0xf, 0x18, 0x23b6, 0x23ca, 0x23de, 0x24ce, 0x24ea, 0xa, 0x404,
		0x4d12, 0xd, 0x190, 0x6162, 0x1, 0x870, 0x3fd, 0x69d2
};

const uint16_t App_Em_Ble_config[] = {
	0x96, 0xa6, 0xb6, 0x494, 0x4dc, 0x524, 0x5c0, 0x948, 0x9a8, 0xb96, 0x15be, 0x1dde
};

#define RWIP_HEAP_ENV_SIZE	0x1b00
#define RWIP_HEAP_MSG_SIZE	0x63a
#define RWIP_HEAP_NON_RET_SIZE	0x1200
*/
const uint16_t App_Em_Common_Config[] = {
	0x00, 0x40, 0x90, 0x96, 0x96, 0x5894/*0x3b4c*/
};

const uint16_t APP_Em_Bt_config[] = {
	0x96, 0x96, 0xa6, 0x3d6, 0x3, 0x3d6, 0x5, 0x41c, 0x480, 0x14,
	0x4e4, 0xf, 0x18, 0x64c, 0x660, 0x674, 0x764, 0x780, 0x9, 0x2bc,
	0x201c, 0xc, 0x190, 0x32dc, 0x1, 0x870, 0x3fd, 0x3b4c
};


const uint16_t App_Em_Ble_config[] = {
	0x3b4c, 0x3b5c, 0x3b6c, 0x3f4a, 0x3f92, 0x3fda, 0x4076, 0x43fe, 0x445e, 0x464c, 0x5074, 0x5894
};

#define RWIP_HEAP_ENV_SIZE	0x1000
#define RWIP_HEAP_MSG_SIZE	0x400
#define RWIP_HEAP_NON_RET_SIZE	0x400

#else

const uint16_t App_Em_Common_Config[] = {
	0x00, 0x40, 0x90, 0x96, 0x96, 0x612e
};

const uint16_t APP_Em_Bt_config[] = {
		0x96, 0x96, 0xa6, 0x3d6, 0x3, 0x3d6, 0x5, 0x41c, 0x480, 0x14,
		0x4e4, 0xf, 0x18, 0x64c, 0x660, 0x674, 0x764, 0x780, 0x9, 0x2bc,
		0x201c, 0xc, 0x190, 0x32dc, 0x2, 0x870, 0x3fd, 0x43bc
};


const uint16_t App_Em_Ble_config[] = {
		0x43bc, 0x43cc, 0x43dc, 0x7ba, 0x4802, 0x4874, 0x4910, 0x4c98, 0x4cf8, 0x4ee6, 0x590e, 0x612e
};

#define RWIP_HEAP_ENV_SIZE	0x1b00
#define RWIP_HEAP_MSG_SIZE	0x63a
#define RWIP_HEAP_NON_RET_SIZE	0x1200

#endif

#elif (BT_SUPPORT == ENABLE)
#if 1
const uint16_t App_Em_Common_Config[] = {
	0x00, 0x40, 0x90, 0x96, 0x96, 0x3b4c/*0x5894*/
};

const uint16_t APP_Em_Bt_config[] = {
	0x96, 0x96, 0xa6, 0x3d6, 0x3, 0x3d6, 0x5, 0x41c, 0x480, 0x14,
	0x4e4, 0xf, 0x18, 0x64c, 0x660, 0x674, 0x764, 0x780, 0x9, 0x2bc,
	0x201c, 0xc, 0x190, 0x32dc, 0x1, 0x870, 0x3fd, 0x3b4c
};


const uint16_t App_Em_Ble_config[] = {
	0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c, 0x3b4c
};

#else

const uint16_t App_Em_Common_Config[] = {
	0x00, 0x40, 0x90, 0x96, 0x96, 0x43bc/*0x5284*/
};

const uint16_t APP_Em_Bt_config[] = {
		0x96, 0x96, 0xa6, 0x3d6, 0x3, 0x3d6, 0x5, 0x41c, 0x480, 0x14,
		0x4e4, 0xf, 0x18, 0x64c, 0x660, 0x674, 0x764, 0x780, 0x9, 0x2bc,
		0x201c, 0xc, 0x190, 0x32dc, 0x2, 0x870, 0x3fd, 0x43bc
};


const uint16_t App_Em_Ble_config[] = {
		0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc, 0x43bc
};

#endif

#define RWIP_HEAP_ENV_SIZE	0x1b00
#define RWIP_HEAP_MSG_SIZE	0x63a
#define RWIP_HEAP_NON_RET_SIZE	0x1200

#endif
#ifdef CFG_APP_BT_MODE_EN
uint32_t app_rwip_heap_env[CALC_HEAP_LEN(RWIP_HEAP_ENV_SIZE)];
uint32_t app_rwip_heap_msg[CALC_HEAP_LEN(RWIP_HEAP_MSG_SIZE)];
uint32_t app_rwip_heap_non_ret[CALC_HEAP_LEN(RWIP_HEAP_NON_RET_SIZE)];

const uint32_t app_rwip_heap_env_size=RWIP_HEAP_ENV_SIZE;
const uint32_t app_rwip_heap_msg_size=RWIP_HEAP_MSG_SIZE;
const uint32_t app_rwip_heap_non_ret_size=RWIP_HEAP_NON_RET_SIZE;

//em params config init
void app_bt_em_params_config(void)
{
	extern void Em_Bt_Params_Config(const void* em_common_config, const void* em_bt_params, const void* em_ble_params);
	extern void Em_Bt_Heap_Reg_Config(void* heap_env, uint32_t heap_env_size, void* heap_msg, uint32_t heap_msg_size, void* heap_non_ret, uint32_t heap_non_ret_size);
	Em_Bt_Params_Config((void*)&App_Em_Common_Config, (void*)&APP_Em_Bt_config, (void*)&App_Em_Ble_config);
	Em_Bt_Heap_Reg_Config((void*)&app_rwip_heap_env, RWIP_HEAP_ENV_SIZE, (void*)&app_rwip_heap_msg, RWIP_HEAP_MSG_SIZE, (void*)&app_rwip_heap_non_ret, RWIP_HEAP_NON_RET_SIZE);
}
#endif
